<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Stages - Module RH</title>
    <link rel="stylesheet" href="stage.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <div class="header-bar">
        <span id="welcome-message"></span>
         <div class="logo-container">
            <img src="../PROJET-DE-SUIVI-ET-GESTION-DU-PERSONNEL/images/HR-etoile2.png" alt="Logo" class="log">
         </div>
    </div>
    
    <div class="gauche">
       <b class="button-nav" onclick="location.href='analyse_cv.html'">Recrutement</b>
       <b class="button-nav" onclick="location.href='postes.html'">Postes</b>
       <b class="button-nav" onclick="location.href='personnel.html'">Personnel</b>
       <b class="button-nav" onclick="location.href='carriere.html'">Carri√®re</b>
       <b class="button-nav" onclick="location.href='conges.html'">Cong√©s</b>
       <b class="button-nav" onclick="location.href='paie.html'">Paie</b>
       <b class="button-nav" onclick="location.href='stages_formation.html'">Stage/formation</b>
       <b class="button-nav" onclick="location.href='plan_activite.html'">Statistiques</b>
       <b class="button-nav" onclick="location.href='utilisateurs.html'">Utilisateurs</b>
       <b class="button-nav" onclick="location.href='audit.html'">Audit</b>
       <b class="button-nav" onclick="location.href='sauvegarde.html'">Sauvegardes</b>
       <b class="button-nav" onclick="location.href='parametres.html'">Param√®tres</b>
        <a href="accueil.html" class="button-nav"><b>Retour</B></a>
    </div>

    
    <div class="container">
        <header class="header">
            <h1><i class="icon">üéì</i> Gestion des Stages</h1>
            <div class="header-stats">
                <div class="stat-card">
                    <span class="stat-number" id="totalStages">0</span>
                    <span class="stat-label">Total</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="stagesEnCours">0</span>
                    <span class="stat-label">En cours</span>
                </div>
            </div>
        </header>


        <div class="container_s">
        <div class="main-content">
            <!-- Formulaire d'ajout -->
            <div class="form-section">
                <h2>Enregistrer un nouveau stagiaire</h2>
                <form id="formStage" class="stage-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nom">Nom *</label>
                            <input type="text" id="nom" required placeholder="Nom du stagiaire" />
                        </div>
                        <div class="form-group">
                            <label for="prenom">Pr√©nom *</label>
                            <input type="text" id="prenom" required placeholder="Pr√©nom du stagiaire" />
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="dateNaissance">Date de naissance *</label>
                            <input type="date" id="dateNaissance" required />
                        </div>
                        <div class="form-group">
                            <label for="typeStage">Type de stage *</label>
                            <select id="typeStage" required>
                                <option value="">-- S√©lectionnez --</option>
                                <option value="acad√©mique">Acad√©mique</option>
                                <option value="professionnel">Professionnel</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="dateDebut">Date d√©but stage *</label>
                            <input type="date" id="dateDebut" required />
                        </div>
                        <div class="form-group">
                            <label for="dateFin">Date fin stage *</label>
                            <input type="date" id="dateFin" required />
                        </div>
                        <div class="form-group">
                            <label for="duree">Dur√©e (jours)</label>
                            <input type="number" id="duree" readonly class="readonly-field" />
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="departement">D√©partement *</label>
                            <select id="departement" required>
                                <option value="">-- Chargement... --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="encadreur">Encadreur *</label>
                            <select id="encadreur" required>
                                <option value="">-- Choisissez un d√©partement d'abord --</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="icon">üíæ</i> Enregistrer le stagiaire
                        </button>
                        <button type="button" id="btnReset" class="btn btn-secondary">
                            <i class="icon">üîÑ</i> R√©initialiser
                        </button>
                    </div>
                </form>
            </div>

            <!-- Section de filtrage et recherche -->
            <div class="filter-section">
                <h2>Liste des stagiaires</h2>
                
                <div class="filters">
                    <div class="filter-group">
                        <label for="filterDepartement">D√©partement:</label>
                        <select id="filterDepartement">
                            <option value="">Tous les d√©partements</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="filterType">Type:</label>
                        <select id="filterType">
                            <option value="">Tous types</option>
                            <option value="acad√©mique">Acad√©mique</option>
                            <option value="professionnel">Professionnel</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="filterStatut">Statut:</label>
                        <select id="filterStatut">
                            <option value="">Tous statuts</option>
                            <option value="En cours">En cours</option>
                            <option value="Termin√©">Termin√©</option>
                            <option value="Suspendu">Suspendu</option>
                        </select>
                    </div>
                    
                    <div class="filter-group search-group">
                        <label for="searchInput">Rechercher:</label>
                        <input type="text" id="searchInput" placeholder="Nom ou pr√©nom..." />
                    </div>
                    
                    <div class="filter-actions">
                        <button id="btnSearch" class="btn btn-search">
                            <i class="icon">üîç</i> Rechercher
                        </button>
                        <button id="btnClearFilters" class="btn btn-secondary">
                            <i class="icon">üóë</i> Effacer
                        </button>
                    </div>
                </div>

                <div class="export-actions">
                    <button id="btnPrint" class="btn btn-export">
                        <i class="icon">üñ®</i> Imprimer
                    </button>
                    <button id="btnExportPDF" class="btn btn-export">
                        <i class="icon">üìÑ</i> Exporter PDF
                    </button>
                </div>
            </div>

            <!-- Table des r√©sultats -->
            <div class="table-section">
                <div class="table-container">
                    <table id="stagesTable" class="stages-table">
                        <thead>
                            <tr>
                                <th>Nom</th>
                                <th>Pr√©nom</th>
                                <th>Date naissance</th>
                                <th>P√©riode de stage</th>
                                <th>Dur√©e</th>
                                <th>D√©partement</th>
                                <th>Encadreur</th>
                                <th>Type</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="no-data">
                                <td colspan="10">Aucun stagiaire trouv√©</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier le statut -->
    <div id="statusModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Modifier le statut</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <p>Stagiaire: <span id="stagiaireNom"></span></p>
                <div class="form-group">
                    <label for="nouveauStatut">Nouveau statut:</label>
                    <select id="nouveauStatut">
                        <option value="En cours">En cours</option>
                        <option value="Termin√©">Termin√©</option>
                        <option value="Suspendu">Suspendu</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnConfirmStatus" class="btn btn-primary">Confirmer</button>
                <button id="btnCancelStatus" class="btn btn-secondary">Annuler</button>
            </div>
        </div>
    </div>
</div>
    <!-- Notifications -->
    <div id="notification" class="notification"></div>
    <script src="stage.js"></script>
</body>
</html>